<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

#3장. 태그로부터의 지능 정보 추출  (P.65)  
	- 태그를 만드는 세가지 방법 (전문가, 사용자, 기계) 
	- 동적 내비게이션  
	- 사용자와 아이템의 텀벡터, 메타데이터 추출 방법  
---
##3.1 태깅에 대한 소개  (P.66)
### 콘텐츠 중심의 애플리케이션의 단점 
사이트에디터에 의해 콘텐츠 분류, 고정된 내비게이션은 사용자에게 지루 할 수 있음, 아이템이 늘어가면 고비용 저효율..  

### 태그를 사용하는 이유  
- 사용자나 아이템에 대한  메타데이터 모델의 빌드가 가능해진다.사용자와 아이템 사이의 동일한 용어가 아이템간의 또는 아이템과 사용자 간의 유사도를 계산 할 수 있게 해준다.(태그를 통해 연결)  
- 예를 들어 태그 클라우드나 하이퍼링크 구를 사용자에게 보여주고 동적 내비게이션(태그 클라우드) 링크를 애플리케이션에 구축할 수 있다.  
- 개인화나 다른 사용자와 연결될 수 있는 메타데이터를 사용할 수 있다.  
- 애플리케이션에 사용되는 용어 데이터셋을 만들 수 있다.  
- 다른 사용자와 공유할 수 있는 아이템을 북마크 할 수 있다.  

### 3.1.1 사용자와 아이템의 태그 관련 메타데이터  (P.67)
|      | 태그    |  |
| :--- | :---:  | ---: |
|      | 메타데이터 용어 데이터셋 |  |
| 콘텐츠 기반 |  | 협업 기반 |  

1. 콘텐츠 기반 접근 방법: 해당 아이템의 콘텐츠를 분석 ( 논문 내 java의 개수 )  
2. 협업기반 접근 방법: 사용자의 행위를 분석 ( 해당 아이템 구매 횟수 / 평균 구매 횟수 )

### 3.1.2 전문가가 생성한 태그  (P.68)
  -  풍부하고 다양한 콘텐츠 제공 ( 해당 분야의 전문가, 보수를 받고 일 함)  
  -  텍스트와 관련된 개념을 가지고 있으며, 텍스트에 없어도 의미상 관련된 단어가 나올 수 있다. (java, python)
  -  사용자 인터페이스에 나타나도록 인위적으로 작성될 수 있다.  
  -  콘텐츠의 흥미에만 집중하지 않고, 좀 더 거시적인 관점을 제공할 수 있다.  
  -  동의어, 구로 표현될 수 있다. 
  -  내부에서 편집한 용어 사전을 기준으로 사용되는 단어들을 결정 할 수 있다.  

  
### 3.1.3 사용자가 생성한 태그  (P.69)
![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_1%20딜리셔스.png?raw=true)
  - 사용자에게 친숙한 텀을 사용한다.  
  - 텍스트와 관련된 개념을 가지고 있으며, 텍스트에 없어도 의미상 관련된 단어가 나올 수 있다. (java, python)  
  - 텍스트에 나오지 않지만 의미상 관련된 단어가 나올 수 있다.  
  - 구로 표현될 수 있다.  
  - 사용자와 아이템에 대한 중요한 협업정보를 제공한다.  
  - 의미적으로 가까운 다양한 텀을 포함 할 수 있다.  
**복수형을 단수형으로 변환 시키거나 외설스러운  단어를 걸러내기 위해 몇 가지 작업을 거쳐야 한다. 태그는 자유롭게 쓸 수 있기 때문에 같은 의미라도 다양한 형태로 존재할 수 있다 ! (e.g. 애플리케이션 내부 태그 사전 이용 자동완성 )**

  
### 3.1.4 기계적으로 생성한 태그  (P.70)  

  - 동의어를 제외한 텍스트 본문에 나온 텀을 사용한다.  
  -  단일 어절의 텀이다. 여러 단어로 이루어진 구일 경우 추출하기가 너무 어렵기 때문에, 사용한다 하더라도 전문가 or 사용자가 생성한 태그로 미리 정의된 것을 사용한다.  
  - 노이즈 태그가 많을 수 있다. (e.g. 다의어, 동음이의어) 다중 텀의 구를 인식하면 해결하는 데 도움이 될 수 있다. 

  **전문가 or 사용자 생성 태그가 없을 경우 유일한 대안이며, 사용자 생성 콘텐츠 분석에 적합하다.**
  
  
### 3.1.5 태깅에 대한 팁  (P.71)
  - 태그 사전을 만들어라. 동의어 사전을 구축하라. 구를 뽑거나 텍스트를 파싱할 때 사전을 활용할 수 있다. (8장 계속)  
  - 문맥에 따라 의미가 달라지는 태그를 피해라. (e.g. gain - height gain, weight gain, capital gain)   
  - 태그는 스테밍 된다. 단수, 복수나 대소문자를 인식하기 위해 다중 태그를 이용하지 말라.  
  - 다중 텀으로 구성된 구는 빈도 수는 적을지 몰라도 높은 연관 매치를 보여준다. 구 사전을 만들어라. (8장 계속) 
  - 아이템을 표현하는 데는 적절하고 관련된 태그만을 사용해야 한다. (e.g. 전문가 생성 태그에서 많은 태그는 역문헌 빈도수에 영향을 준다.)  
  -  세 가지 형태의 태그들을 결합해서 사용할 수 있어야 한다.  

  
### 3.1.6 왜 태그를 이용 하는가 ? (P.72) 
![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_1%20아마존.png?raw=true)
1. 관심있는 아이템들을 정리하거나 기억하기 위해 사용한다.  
2. 다른 사용자들과 공유를 하거나, 다른 사용자가 같은 태그를 사용한 관련 아이템을 찾기 위해서 태깅을 사용한다.  
3. 유사한 태그를 찾을 수도 있다.

![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_1%20인스타그램.png?raw=true)
  
---
##3.2 어떻게 태그를 이용할까 ?  (P.73)
 아이템 콘텐츠를 분석한 태그나 사용자가 매긴 태그들을 분석하면 메타데이터를 만드는데 많은 도움이 된다. 
 또한, 동적 내비게이션을 만들거나 타깃 검색을 하거나, 폭소노미를 만드는데 사용될 수도 있다.  
### 3.2.1 동적 내비게이션 만들기  (P.74)
 애플리케이션 초기모델의 콘텐츠는 전문가에 의해 분류된다. 이 때, 사용자는 카테고리 구조를 타고 내려가 원하는 콘텐츠를 찾는다.  
 고정된 카테고리 분류의 대안으로 동적 내비게이션인 태그 클라우드를 제시한다. 
 ![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_2%20클라우드1.png?raw=true)   
 - squidoo.com 의 태그 클라우드  
   - 알파벳 순 정렬
   - 태그의 빈도 수에 따라 크기 차등  
   - 태그마다 폰트 컬러 상이  
 ![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_2%20클라우드2.png?raw=true)  
 - 플리커의 태그 클라우드  
   - 스테밍되지 않은 태그  
   - 단일 텀 태그만 사용e (e.g. newyorkcity -> new, york, city)  

**정확하게 태그를 사용하려면,   
>1. 복수형에 대한 정규화를 위한 스테밍 작업이 필요하다.   
2. 다중 텀 구를 인식 할 수 있어야 한다.   
3. 동의어 태그를 처리할 수 있어야 한다.**

텀벡터가 태그의 메타데이터를 표현하는 하나의 방법이라면, 태그 클라우드는 아이템이나 사용자에 특화되고 관련된 메타데이터를 효과적으로 표현해주는 하나의 방법이다.
(스테밍처리, 구 인식, 동의어 추가 등은 4장에서 실제 구현은 8장에서)
  
### 3.2.2 태그 클라우드를 좀 더 효과적으로 이용하기  (P.76)
 **태그 클라우드란 ? 텀벡터를 시각화 하는 방법**  
![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_2%20태그클라우드3.png?raw=true)  
 여러 문서에서 만들어진 텀벡터를 결합해 태그 클라우드 형태로 만들어 사용자에게 보여준다.  
[교재 예제] 1. 야후 콘텐츠 분석 툴을 이용해 뉴스기사에서 키워드를 추출해 제공한다.   
2. zoomcloud는 RSS 피드를 이용해 태그클라우드를 만들 수 있고, 사용자에 맞게 수정해 개인화 된 태그 클라우드를 구축할 수 있다.  


### 3.2.3 타깃 검색  (P.77)
 > 2005년 6월, 야후가 구글에 맞서기 위해 MyRank 검색 기술을 공개했다. 당시 구글은 PageRank알고리즘을 기반으로 시장의 50~60%를 차지하고 있었다. 그러나 야후의 MyRank는 야후 커뮤니티의 마이웹2.0을 활용해 사용자 커뮤니티에 의해 만들어진 집단지성을 이용해 관심있는 웹 페이지를 개인 캐시에 복사하고 태깅을 할 수 있었다. 
![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_2%20타깃검색.png?raw=true)  
**태그 + 문맥 + 사용자 메타데이터 -> 검색엔진 -> 적합한 결과**
  
### 3.2.4 폭소노미와 사전 구축  (P.78)
  - 폭소노미(folksonomy)_ Thomas Vander Wal  
    - taxonomies와는 반대되는 개념 (전문적으로 개발된 분류 체계) 
    - folk(사용자) + taxonomy(분류체계) = folksonomy
    - 아이템을 분류하기 위한 사용자 생성태그의 특별한 활용 방법  
    - 비슷한 취향을 가진 다른 사용자들을 찾기 쉽다.  

  - 사용자는 자신만의 분류체계를 만들고, 이것은 사용자와 아이템에 대한 유용한 정보를 제공해 준다.
  - 텀 셋(term set) 
    - 사용자나 아이템을 표현하는데 쓰는 태그들로 구성됨.  
    - 태그 사전을 이용하면 자동화된 알고리즘을 사용하여 다중 텀 태그를 추출하기 쉽다. 
    - 태그 사전은 온톨로지를 통해 애플리케이션에서 쓸 수 있는 사전을 생성 가능하다.  

  - 온톨로지 (Ontology) 또한 태그사전을 생성하는 또 다른 방법이다.
    - 사람들이 세상에 대하여 보고 듣고 느끼고 생각하는 것에 대하여 서로간의 토론을 통하여 합의를 이룬 바를 **개념적**이고 컴퓨터에서 다룰 수 있는 형태로 표현한 모델
    - 개념의 타입이나 사용상의 제약조건들을 명시적으로 정의한 기술  
    - 합의된 지식을 나타내므로 어느 개인에게 국한되는 것이 아니라 그룹 구성원이 모두 동의하는 개념  
    - 프로그램이 이해할 수 있어야 하므로 여러가지 **정형화**가 존재함.  
![](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_2%20온톨로지.png?raw=true)  
  
----

## 사용자 태깅을 통한 지능 정보 추출 예제  (P.79)
- 태깅에 대한 질문
  * 아이템과 관련된 다른 아이템은 무엇인가 ?  
  * 사용자가 관심을 가질만한 아이템은 무엇인가 ?  
  * 새로운 아이템이 나왔을 때, 새 아이템에 관심을 가질만한 사용자들은 누구인가 ?  

  [예제] 
  - 존은  글1에 사과, 과일, 바나나를 태깅했다.  
  - 존은  글2에 오렌지, 망고, 과일을 태깅했다.  
  - 제인은 글3에 체리, 오렌지, 과일을 태깅했다.  

![집단지성3_3 원본데이터](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_3%20원본데이터.png?raw=true)
이 때, 데이터 셋은 6개 (사과, 과일, 바나나, 오렌지, 망고, 체리)고, 각 아이템은 6차원의 벡터를 구성한다고 가정하고 정규화 인자를 계산한다.   
(글 1에 대한 정규화 인자) \\(\sqrt{4^2 + 8^2 + 6^2 + 3^2}=11.18 \\)  

![집단지성3_3 정규화벡터](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_3%20정규화벡터.png?raw=true)
(정규화 한 값들의 제곱의 합은 1이다.)  

### 3.3.1 다른 아이템과 관련된 아이템  (P.81)
**첫번째 질문 ! 아이템과 관련된 다른 아이템은 무엇인가 ?**
![집단지성3_3 유사도행렬](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20유사도행렬.png?raw=true)    

[글1과 글2의 관련성을 알아보기 위해 글1과 글2의 내적을 계산한 유사도 행렬]

글 2는 글 3보다 글 1과 더 깊이 관련있다.
  
### 3.3.2 사용자가 관심을 가질만한 아이템 (P.81)
**두번째 질문 ! 사용자가 관심을 가질만한 아이템은 무엇인가 ?**
사용자가 태깅한 아이템을 기반으로 사용자가 흥미를 가지고 있는 아이템을 정량화하여 유사도 행렬을 작성한다. 
![사용자원본](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_3%20사용자원본.png?raw=true)
  
![사용자정규](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_3%20사용자정규.png?raw=true)

![사용자유사도](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_3%20사용자유사도.png?raw=true)

  다음 표에서 존은 글 1과 글 2에 관심이 있고, 제인은 글 3에 관심이 많다는 것을 알 수 있다.   
  
### 3.3.3 아이템과 관련 있는 사용자들 (P.82)
**마지막 질문 ! 이 아이템에 관심을 가질만한 사용자는 누구인가?**  
  
새로운 아이템과 후보 사용자 그룹의 메타데이터의 유사도를 계산한다.  
이런 연관성은 아이템에 관심있는 사용자들을 선별할 때 사용할 수 있다.

   
---
## 3.4 태깅에 적합한 확장성 있는 아키텍처 (P.83)  
 - 웹2.0 애플리케이션은 사용자들의 교류로 하여금 분석할 가치가 있는 수많은 데이터를 양산함.  
 - 확장성(scale)있는 태그 메타데이터, 태그 클라우드 등을 구성하기 위한 견고하고 지속적인 영속 모델의 개발이 필요하다.  
![집단지성3_4 태그](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20태그.png?raw=true)  
tags table은 태그를 저장하고, tagging_source는 태그의 세가지 소스로 된 정보를 저장한다. (전문가, 사용자, 기계)  

>세 가지 접근 방법
 - MySQLLicious  
 - Scuttle  
 - Toxi  

  
### 3.4.1 다른 접근 방법 살펴보기 (P.84)  
1. MySQLicious  
![집단지성3_4 mysqlicous](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20toxi.png?raw=true)  
 - 비정규화된 테이블로 구성  
 - 태그가 단일 텀이라고 가정  
 - 태그들이 각 행에 중복 저장 될 수 있음  

 >Select url from mysqlicious where tags like %database%  
쿼리는 간단하나 대용량에서 시간이 많이 걸리고 태그 정보 또한 중복되어 있기 떄문에 대용량엔 적절하지 않다.  
**가능하면 공백을 구분자로 사용하지 말 것 ! (개별태그 및 스테밍 단어를 뽑기 위해서는 매번 파싱을 해야하고 성능이 좋지 않다.)**

2. SUTTLE  
![집단지성3_4 scuttle](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20scuttle.png?raw=true)  
  - 북마크 정보와 태그 정보를 두 테이블로 분리 저장하고 join해서 결과를 가져 옴
  - 각 태그는 행 단위로 저장하고 대용량에 더욱 적합해졌음  
  - MySQLicous 보다 정규화 되었으나 여전히 Tag는 중복저장 됨 
```{.sql}
Select b.url from scuttle_bookmark b, scuttle_tags t where  
b.bookmark_id = t.bookmark_id and t. tag = 'database'   
group by b.url  
```

3. Toxi  
![집단지성3_4 toxi](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20toxi.png?raw=true)  
 -  각 북마크는 태그를 여러개 가질 수 있고, 각 태그 또한 북마크를 여러개 가질 수 있음  
 -  다대다 관계를 표현하는 3개의 테이블로 구성  
 -  현재 인터넷에서 가장 많이 사용중인 방법  

**정규화가 되면서 가장 대용량 처리에 적합하다.**
  
### 3.4.2 추천 아키텍쳐 (P.87)
  - 사용자 생성 태그를 위한 스키마  
![집단지성3_4 추천스키마](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집댠지성3_4%20추천스키마.png?raw=true)
    - 적용사례 1 : 일치하는 태그를 하나 이상 가진 사용자들이 사용한 다른 태그는 무엇인가 ?  
       적용사례 2 : 주어진 아이템과 유사하게 태깅된 다른 아이템은 무엇인가 ?  
    - 사용되는 태그셋을 구하기 위한 중첩 쿼리들
![집단지성3_4 중첩쿼리](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20중첩쿼리.png?raw=true)
       1. 사용자가 사용한 태그 집합을 찾는다.  
       2. 찾은 태그를 하나라도 사용하는 사용자들의 집합을 찾는다.  
       3. 그런 사용자들이 사용했던 태그 집합을 찾는다.  

```{.sql}
Select distinct t.tag_id, t.tagtext from tags t, user_item_tag uit where t.tag_id=uit.tag_id and uit.user_id = 1; 
```
[존이 붙인 모든 태그를 중복제거 후 가져오는 쿼리]  
  
  
```{.sql}
Select distinct uit2.user_id from user_item_tag uit2, tags t2 where uit2.tag_id = t2.tag_id anduit2.tag_id in (Select distinct t.tag_id from tags t, user_item_tag uitwheret.tag_id = uit.tag_id and uit.user_id = 1)   
```
[존과 최소 하나의 태그가 중복되는 사용자를 찾는 쿼리]
  
```{.sql}
Select uit3.ta_g_id, t3.tag_id, count(*) from user_item_tag uit3, tags t3 whereuit3.tag_id = t3.tag_id and uit3.user_idin (Select distinct uit2.user_id from user_item_tag uit2, tags t2 where uit2.tag_id = t2.tag_id anduit2.tag_id in (Select distinct t.tag_id from tags t, user_item_tag uit where t.tag_id = uit.tag_id and uit.user_id = 1) )group by uit3.tag_id  
```
[다른 사용자들이 사용했던 모든 태그를 가져오는 마지막 쿼리]  

[결과]  
![집단지성3_4 쿼리결과](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20쿼리결과.png?raw=true)  

 - 전문가가 생성하거나 기계적으로 생성된 태그를 위한 스키마  
![집단지성3_4 전문가](https://github.com/HeoJooSeong/zoostar/blob/master/TISTORY/이미지/집단지성3_4%20전문가.png?raw=true)  
[태그와 관련된 아이템의 메타데이터를 저장하기 위한 테이블]  
    - item_tag테이블을 추가하여 태그를 저장하고, weight 칼럼을 두고 아이템과 관련된 메타데이터를 저장한다. 
  
---
## 3.5 태그 클라우드 만들기  (P.92)  
### 3.5.1 태그 클라우드에 적합한 영속적인 디자인 (P.92)  
  - 태그 리스트의 가중치 목록 구성  (단, count함수는 성능이 좋지 않으므로 요약 테이블 사용 추천)
  - 요약 테이블과 날짜 테이블 추가  
  - 특정 태그로 태깅된 아이템 리스트 추출  
  - 전문가나 기계적으로 생성한 태그에 대한 아이템 리스트 추출  
  
### 3.5.2 태그 클라우드를 만드는 알고리즘 (P.93)  
 1. 태그 목록과 빈도 수 가져오기  
 2. 각 태그의 최대, 최소 빈도 수 확인  
 3. 폰트 크기의 개수를 결정  
 4. 각 폰트 크기의 범위를 결정  
 5. css 스타일시트를 사용해 태그 클라우드의 각 아이템을 적절한 폰트 크기로 출력  

>케빈 호프먼(Kevin Hoffmann)은 빈도 수에 log를 적용하고 log값의 범위에 상응하는 폰트 크기의 버킷을 만들어 적절히 분배하는 함수를 제안함  
  
### 3.5.3 태그 클라우드 구현 (P.94)  

### 3.5.4 태그 클라우드 보여주기 (P.101)  

---
## 3.6 유사한 태그 찾기 (P.106)  
  - 스테밍 이용
    - 단어에서 어근만 추출  
    - 불용어를 제거  
    - 단수형 / 복수형의 단어를 하나로 통일  
  - 동의어 ,구 사전을 이용  
  - 태그의 동시출현 분석 (동일한 아이템에 등록된 태그라면 유사한 태그일 것이다)  
  
---


